import{i as E,t as R,r as a,j as c,c as W}from"./core-CJ1JWWxS.js";var f;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(f||(f={}));async function w(e,s){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,s),await E("plugin:event|unlisten",{event:e,eventId:s})}async function D(e,s,g){var l;const u=(l=void 0)!==null&&l!==void 0?l:{kind:"Any"};return E("plugin:event|listen",{event:e,target:u,handler:R(s)}).then(m=>async()=>w(e,m))}const d=9;function N(e){return Number.isFinite(e)?Math.max(0,Math.min(1,e)):0}function I(e){return`level-${Math.round(N(e)*10)}`}function O(){const[e,s]=a.useState(0),[g,l]=a.useState(0),[u,m]=a.useState(0),[i,_]=a.useState("listening");a.useEffect(()=>{let t=!0;const n=async()=>{const o=await D("recording-amplitude",p=>{t&&i!=="processing"&&s(N(p.payload.level))}),h=await D("recording-state",p=>{if(t){if(p.payload.state==="processing"){_("processing"),s(0);return}_("listening")}});return()=>{o(),h()}};let r;return n().then(o=>{r=o}).catch(()=>{}),()=>{t=!1,r?.()}},[i]),a.useEffect(()=>{let t=0;const n=()=>{l(r=>r+(e-r)*.3),m(r=>r+.14),t=window.requestAnimationFrame(n)};return t=window.requestAnimationFrame(n),()=>window.cancelAnimationFrame(t)},[e]);const A=a.useMemo(()=>i==="processing"?Array.from({length:d},(t,n)=>{const r=n/d*Math.PI*1.5;return .2+(Math.sin(u+r)+1)*.12}):Array.from({length:d},(t,n)=>{const r=n/d*Math.PI*1.5,o=Math.sin(u+r)*.16;return Math.max(.08,Math.min(1,g+o))}),[g,u,i]);return c.jsxs("main",{className:`recording-shell ${i==="processing"?"recording-shell-processing":""}`,"data-tauri-drag-region":!0,children:[c.jsx("span",{className:"recording-label","data-tauri-drag-region":!0,children:i==="processing"?"Processing":"Listening"}),c.jsx("div",{className:"wave-bars","data-tauri-drag-region":!0,children:A.map((t,n)=>c.jsx("span",{className:`wave-bar ${I(t)}`},n))})]})}W.createRoot(document.getElementById("recording-root")).render(c.jsx(a.StrictMode,{children:c.jsx(O,{})}));
