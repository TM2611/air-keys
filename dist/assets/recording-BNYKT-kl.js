import{i as h,t as N,c as f,j as i,r as s}from"./core-CJ1JWWxS.js";var _;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(_||(_={}));async function R(e,n){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,n),await h("plugin:event|unlisten",{event:e,eventId:n})}async function W(e,n,u){var o;const c=(o=void 0)!==null&&o!==void 0?o:{kind:"Any"};return h("plugin:event|listen",{event:e,target:c,handler:N(n)}).then(d=>async()=>R(e,d))}const g=9;function D(e){return Number.isFinite(e)?Math.max(0,Math.min(1,e)):0}function p(e){return`level-${Math.round(D(e)*10)}`}function A(){const[e,n]=s.useState(0),[u,o]=s.useState(0),[c,d]=s.useState(0);s.useEffect(()=>{let t=!0;const a=async()=>await W("recording-amplitude",m=>{t&&n(D(m.payload.level))});let r;return a().then(l=>{r=l}).catch(()=>{}),()=>{t=!1,r?.()}},[]),s.useEffect(()=>{let t=0;const a=()=>{o(r=>r+(e-r)*.3),d(r=>r+.14),t=window.requestAnimationFrame(a)};return t=window.requestAnimationFrame(a),()=>window.cancelAnimationFrame(t)},[e]);const E=s.useMemo(()=>Array.from({length:g},(t,a)=>{const r=a/g*Math.PI*1.5,l=Math.sin(c+r)*.16;return Math.max(.08,Math.min(1,u+l))}),[u,c]);return i.jsxs("main",{className:"recording-shell","data-tauri-drag-region":!0,children:[i.jsx("span",{className:"recording-label","data-tauri-drag-region":!0,children:"Listening"}),i.jsx("div",{className:"wave-bars","data-tauri-drag-region":!0,children:E.map((t,a)=>i.jsx("span",{className:`wave-bar ${p(t)}`},a))})]})}f.createRoot(document.getElementById("recording-root")).render(i.jsx(s.StrictMode,{children:i.jsx(A,{})}));
